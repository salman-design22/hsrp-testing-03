<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Plate Guide</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom Configuration for Theme and Font -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // --- PRIMARY BLUE COLOR FOR BUTTONS (Used for Tailwind utility classes) ---
                        'primary-blue': '#0644F4', // Button color
                        'dark-blue': '#0432B8',   // Darker shade for button shadow
                        // --- END PRIMARY BLUE COLOR FOR BUTTONS ---
                        'accent-orange': '#FF9933',
                        'accent-green': '#138808',
                        'dark-gray': '#1F2937',
                        // --- CARD COLORS ---
                        'card-old-bg': '#FBBC05', 
                        'card-new-bg': '#3E83F4', 
                        'card-ev-bg': '#34A853',  
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- Ensure Inter font is loaded for better look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* IMPORTANT FIX: Define CSS Variables globally so the .cta-button class can access them */
        :root {
            --primary-blue: #0644F4;
            --dark-blue: #0432B8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Light background */
        }
        /* Style for the tricolor logo */
        .tricolor-logo {
            background: linear-gradient(45deg, #FF9933 33%, #FFFFFF 33%, #FFFFFF 67%, #138808 67%);
            color: #1F2937;
            border-radius: 9999px; /* Full rounded circle */
        }
        /* Specific button style for consistent look and 'pop' effect */
        .cta-button {
            /* Now correctly using the defined CSS variable for the mandatory blue color */
            background-color: var(--primary-blue); 
            border-bottom: 6px solid var(--dark-blue); /* Thicker bottom border using dark-blue */
            transition: all 0.15s ease-in-out; /* Smooth transitions for movement */
        }
        .cta-button:hover {
            background-color: #1F63F8; /* Adjusted lighter blue for hover */
            transform: translateY(-2px); /* Slight upward lift */
            box-shadow: 0 8px 15px rgba(4, 50, 184, 0.4); /* Stronger shadow on hover (based on dark-blue) */
        }
        .cta-button:active {
            transform: translateY(2px); /* Pressed effect (moves down) */
            border-bottom-width: 2px; /* Bottom border shrinks */
            box-shadow: none; /* Shadow disappears when pressed */
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header / Navbar (Tricolor Branding) -->
    <header class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <!-- Logo Area (Tricolor Plate Guide Logo) -->
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 flex items-center justify-center font-extrabold text-lg tricolor-logo border border-gray-300">
                    GUIDE
                </div>
                <h1 class="text-xl font-extrabold text-dark-gray">
                    Plate Guide
                </h1>
            </div>

            <!-- Navigation Links -->
            <nav class="hidden md:flex space-x-6 text-sm font-semibold">
                <a href="#" class="text-primary-blue hover:text-dark-blue transition duration-150">Home</a>
                <a href="#report" class="text-gray-600 hover:text-dark-blue transition duration-150">About Plates</a>
                <a href="#faqs" class="text-gray-600 hover:text-dark-blue transition duration-150">FAQs</a>
                <a href="#contact" class="text-gray-600 hover:text-dark-blue transition duration-150">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 md:py-16">
        
        <!-- === 1. Selection Screen (Visible by default) === -->
        <div id="selection-screen">
            <h2 class="text-center text-2xl md:text-3xl font-bold text-dark-gray mb-12">
                Select the type of Plate you are interested in (‡§™‡•ç‡§≤‡•á‡§ü ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç)
            </h2>

            <!-- Booking Options Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">

                <!-- Card 1: Old Vehicle Plate -->
                <div class="bg-card-old-bg p-6 rounded-xl shadow-lg border-2 border-yellow-700/50 flex flex-col justify-between transform hover:shadow-xl hover:scale-[1.01] transition duration-300">
                    <h3 class="text-xl font-extrabold text-dark-gray">Old Vehicle Plate</h3>
                    <p class="text-gray-700 mt-2 flex-grow">
                        See the guide for old/existing vehicles (‡§™‡•Å‡§∞‡§æ‡§®‡•á/‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ ‡§µ‡§æ‡§π‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ó‡§æ‡§á‡§° ‡§¶‡•á‡§ñ‡•á‡§Ç)
                    </p>
                    <button onclick="handleApplyNow('Old Vehicle')" class="inline-block mt-6 px-6 py-2 text-md font-black text-white rounded-lg shadow-xl text-center cta-button">
                        Click Here ‚Üí
                    </button>
                </div>

                <!-- Card 2: New Vehicle Plate -->
                <div class="bg-card-new-bg p-6 rounded-xl shadow-lg border-2 border-blue-700/50 flex flex-col justify-between transform hover:shadow-xl hover:scale-[1.01] transition duration-300 text-white">
                    <h3 class="text-xl font-extrabold">New Vehicle Plate</h3>
                    <p class="text-white/90 mt-2 flex-grow">
                        See the guide for newly registered vehicles (‡§®‡§è ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§µ‡§æ‡§π‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ó‡§æ‡§á‡§° ‡§¶‡•á‡§ñ‡•á‡§Ç)
                    </p>
                    <button onclick="handleApplyNow('New Vehicle')" class="inline-block mt-6 px-6 py-2 text-md font-black text-white rounded-lg shadow-xl text-center cta-button">
                        Click Here ‚Üí
                    </button>
                </div>

                <!-- Card 3: Plate for Electric Vehicles -->
                <div class="bg-card-ev-bg p-6 rounded-xl shadow-lg border-2 border-green-700/50 flex flex-col justify-between transform hover:shadow-xl hover:scale-[1.01] transition duration-300 text-white">
                    <h3 class="text-xl font-extrabold">Electric Vehicle Plate</h3>
                    <p class="text-white/90 mt-2 flex-grow">
                        See the guide for electric vehicles (‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡§ø‡§ï ‡§µ‡§æ‡§π‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ó‡§æ‡§á‡§° ‡§¶‡•á‡§ñ‡•á‡§Ç)
                    </p>
                    <button onclick="handleApplyNow('Electric Vehicle')" class="inline-block mt-6 px-6 py-2 text-md font-black text-white rounded-lg shadow-xl text-center cta-button">
                        Click Here ‚Üí
                    </button>
                </div>
            </div>
            
            <!-- Grievance Addressal Section -->
            <div class="max-w-xl mx-auto mt-10">
                <div class="bg-primary-blue p-6 rounded-xl shadow-xl flex flex-col sm:flex-row justify-between items-center">
                    <div class="text-white text-center sm:text-left mb-4 sm:mb-0">
                        <h3 class="text-xl font-extrabold">Grievance Addressal</h3>
                        <p class="text-sm text-blue-200 mt-1">Please reach out to us for any issues related to awareness or process.</p>
                    </div>
                    <!-- This button is symbolic and uses bg-white -->
                    <button onclick="alert('This is a simulated enquiry. This platform is for awareness only.')" 
                            class="px-8 py-2 text-md font-bold bg-white text-primary-blue rounded-lg shadow-md hover:bg-gray-100 transition duration-150">
                        Enquiry
                    </button>
                </div>
            </div>

            <!-- Awareness Message -->
            <div class="mt-16 text-center text-gray-500 text-sm italic">
                <p>We run this site purely for public awareness, ensuring citizens learn the correct plate procedure. Road Safety is our core focus.</p>
            </div>
            
            <!-- Detailed Report Section (Kept for context/scrolling) -->
            <section id="report" class="max-w-7xl mx-auto py-10 md:py-16 bg-white shadow-xl rounded-xl my-10 px-6">
                <h2 class="text-3xl font-extrabold text-dark-gray mb-6 border-b pb-2">Plate Standardisation and Road Safety in India: An Awareness Report</h2>
                
                <!-- Section 1: Important Disclaimer and Objective -->
                <div class="mb-8">
                    <h3 class="text-2xl font-bold text-primary-blue mb-4">Section 1: Important Disclaimer and Objective</h3>
                    <div class="bg-red-50 border-l-4 border-red-600 p-4 rounded-lg mt-4">
                        <p class="font-semibold text-red-700">Disclaimer:</p>
                        <p class="text-red-600 mt-1">It is explicitly declared that this platform is a **SIMULATION** and does not accept any real payment or fees. The goal is only to teach the correct procedure. Users must make payments for plates only on official government portals.</p>
                    </div>
                </div>

                <!-- Section 2: Introduction -->
                <div class="mb-8">
                    <h3 class="text-2xl font-bold text-dark-gray mb-4">Section 2: Introduction - Towards a Safer Road</h3>
                    <p class="text-gray-700 leading-relaxed">Road safety is a serious challenge in India today. To address this, the government has launched the **High-Security Registration Plates (HSRP)** initiative. HSRP is a security device that standardizes vehicle identification and helps control crime. This report provides an awareness guide on HSRP features and its positive impact on road safety.</p>
                </div>
                
                <!-- Section 3: The Need for HSRP -->
                <div class="mb-8">
                    <h3 class="text-2xl font-bold text-dark-gray mb-4">Section 3: The Need for Standardized Plates - Security and Standardization</h3>
                    <p class="font-semibold mt-4">Key Security Features of Standardized Plates:</p>
                    <ul class="list-disc list-inside text-gray-700 ml-4 space-y-1 mt-2">
                        <li>**Chromium-Based Hologram:** Ensures plate authenticity.</li>
                        <li>**Laser Etched Unique PIN:** Permanent identification link to the chassis.</li>
                        <li>**Retro-Reflective Film:** Improves visibility in low-light conditions, preventing accidents.</li>
                        <li>**Snap Lock / Non-Reusable Lock:** Prevents plate swapping and theft.</li>
                    </ul>
                </div>
                
                <!-- Section 7: Broader Benefits -->
                <div class="mb-8">
                    <h3 class="text-2xl font-bold text-dark-gray mb-4">Section 4: Broader Benefits</h3>
                    <ul class="list-disc list-inside text-gray-700 ml-4 space-y-1 mt-2">
                        <li>**Digital Integration:** Centralized database ensures tax compliance and national vehicle identity.</li>
                        <li>**E-Challan System:** Standardized plates boost the accuracy of E-Challan cameras.</li>
                    </ul>
                </div>
                
                <div class="mt-8 pt-4 border-t">
                    <h3 class="text-xl font-bold text-primary-blue">Conclusion:</h3>
                    <p class="text-gray-700 italic mt-2">Standardized Plate is a far-sighted step towards bringing security, identity, and accountability to India's roads. Awareness platforms like this website play a vital role in making this change successful. Spread awareness, learn the correct procedure, and move towards a safer India.</p>
                </div>

            </section>

        </div>

        <!-- === 2. Booking Form Screen (Initially hidden) === -->
        <div id="booking-form-screen" class="hidden">
            <div id="form-container" class="bg-white p-6 md:p-10 rounded-xl shadow-2xl border border-gray-200">
                <h2 class="text-3xl font-extrabold text-primary-blue mb-2" id="form-title">
                    Plate Guide
                </h2>
                <p class="text-gray-500 mb-8 font-semibold" id="form-subtitle">
                    Step 1 of 3: Vehicle Details (‡§µ‡§æ‡§π‡§® ‡§µ‡§ø‡§µ‡§∞‡§£)
                </p>

                <!-- Step 1 Content -->
                <div id="step-1-vehicle" class="space-y-6">
                    <!-- Content injected via JavaScript -->
                </div>

                <!-- Step 2 Content -->
                <div id="step-2-personal" class="space-y-6 hidden">
                    <!-- Content injected via JavaScript -->
                </div>

                <!-- Navigation Buttons -->
                <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-100">
                    <!-- 'Back' button remains functional for internal form navigation -->
                    <button id="back-button" onclick="goBackToSelection()" class="px-6 py-2 text-md font-semibold text-white bg-gray-600 rounded-lg hover:bg-gray-700 transition duration-150 shadow-md">
                        ‚Üê Back
                    </button>
                    <!-- 'Next' button now correctly shows Blue (cta-button) -->
                    <button id="next-button" onclick="nextStep()" class="px-8 py-3 text-md font-bold text-white rounded-lg shadow-xl text-center cta-button">
                        Next: Personal Details ‚Üí
                    </button>
                    <!-- 'Review' button before Final Step -->
                    <button id="review-button" onclick="nextStep()" class="px-8 py-3 text-md font-bold text-white rounded-lg shadow-xl text-center cta-button hidden">
                        Next: Final Confirmation ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- === 3. Confirmation Step Screen (was Payment Screen) (Initially hidden) === -->
        <div id="payment-screen" class="hidden max-w-lg mx-auto">
            <div class="bg-white p-6 md:p-10 rounded-xl shadow-2xl border border-gray-200 text-center">
                
                <h2 class="text-3xl font-extrabold text-dark-gray mb-2">FINAL CONFIRMATION (‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø)</h2>
                <p class="text-gray-500 mb-6 font-semibold">This completes the demonstration of the required steps.</p>

                <!-- Order Details (Only Order ID remains) -->
                <div class="text-lg font-medium text-gray-700 space-y-2 mb-8">
                    <p>Guide ID: <span id="payment-order-id" class="font-bold text-primary-blue">GUIDE-XXXXX</span></p>
                </div>

                <!-- Simulation Image Placeholder (Simulating payment/document verification) -->
                <div class="border-2 border-gray-300 p-4 inline-block rounded-lg shadow-inner bg-gray-50">
                    <img src="https://i.postimg.cc/9f0D9czR/Whats-App-Image-2025-12-03-at-4-27-40-PM.jpg" 
                         alt="Document Verification Placeholder" 
                         class="w-48 h-48 mx-auto" 
                         onerror="this.onerror=null; this.src='https://placehold.co/200x200/F8D7DA/721C24?text=Verification+Image+Error';">
                    <p class="text-sm text-gray-500 mt-2">Simulated Document Verification</p>
                </div>
                
                <!-- Final Confirmation Button -->
                <div id="transaction-upload-section" class="mt-6 p-4 bg-gray-100 rounded-lg border border-gray-200">
                    <p class="text-sm font-medium text-gray-700 mb-4">Click below to finalize the guide simulation.</p>

                    <!-- The verification button now handles the booking confirmation -->
                    <button onclick="verifyTransaction()" class="w-full mt-2 px-6 py-2 text-md font-bold text-white bg-accent-green rounded-lg hover:bg-green-700 transition duration-150 shadow-md">
                        Finalize Guide and View Confirmation
                    </button>
                </div>

                <!-- Timer and Disclaimer - CHANGED to "Confirmation Timeout" -->
                <div class="bg-yellow-100 p-3 rounded-lg mt-8 text-yellow-800 font-medium">
                    <p>Confirmation window must be completed within <span id="payment-timer">05:00</span></p>
                </div>
            </div>
        </div>

        <!-- === 4. Thank You Screen (Initially hidden) === -->
        <div id="thank-you-screen" class="hidden max-w-lg mx-auto">
            <div class="bg-white p-6 md:p-10 rounded-xl shadow-2xl border border-gray-200 text-center">
                
                <!-- Confirmed Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-accent-green mb-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>

                <h2 class="text-3xl font-extrabold text-accent-green mb-1">‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ü‡§™‡§ï‡•Ä ‡§ó‡§æ‡§á‡§° ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§™‡•Ç‡§∞‡•Ä ‡§π‡•Å‡§à‡•§ üéâ</h2>
                <h2 class="text-xl font-bold text-dark-gray mb-6">Thank You! Your Guide Process is Complete üéâ</h2>

                <!-- Note Section - UPDATED -->
                <div class="bg-blue-50 border-l-4 border-primary-blue p-4 rounded-lg text-left mt-8">
                    <p class="font-bold text-primary-blue mb-2">Awareness Note / ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§®‡•ã‡§ü:</p>
                    <p class="text-gray-700 text-sm">This guide successfully demonstrated the necessary steps for your reference.</p>
                </div>
                
            </div>
        </div>
    </main>

    <!-- Footer with Links -->
    <footer class="bg-white border-t border-gray-200 py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-wrap justify-center text-sm font-semibold space-x-4 md:space-x-8">
                <a href="#report" class="text-gray-600 hover:text-dark-blue">About Plates</a>
                <a href="#" class="text-gray-600 hover:text-dark-blue">Privacy Policy</a>
                <a href="#" class="text-gray-600 hover:text-dark-blue">FAQ</a>
                <p class="text-gray-400 mt-2 w-full text-center">Guide Available for All States</p>
            </div>
        </div>
    </footer>

    <script>
        // Form state variables
        let currentStep = 1;
        let selectedVehicleType = ''; // Stores the type from the clicked card
        let paymentTimerInterval; // To hold the timer interval
        
        // Data for all Indian States/UTs (Code: Name)
        const indianStates = {
            "AN": "Andaman and Nicobar Islands", "AP": "Andhra Pradesh", "AR": "Arunachal Pradesh",
            "AS": "Assam", "BR": "Bihar", "CH": "Chandigarh", "CG": "Chhattisgarh", "DH": "Dadra and Nagar Haveli and Daman and Diu",
            "DL": "Delhi", "GA": "Goa", "GJ": "Gujarat", "HR": "Haryana", "HP": "Himachal Pradesh",
            "JK": "Jammu and Kashmir", "JH": "Jharkhand", "KA": "Karnataka", "KL": "Kerala",
            "LA": "Ladakh", "LD": "Lakshadweep", "MP": "Madhya Pradesh", "MH": "Maharashtra",
            "MN": "Manipur", "ML": "Meghalaya", "MZ": "Mizoram", "NL": "Nagaland", "OD": "Odisha",
            "PY": "Puducherry", "PB": "Punjab", "RJ": "Rajasthan", "SK": "Sikkim", "TN": "Tamil Nadu",
            "TS": "Telangana", "TR": "Tripura", "UP": "Uttar Pradesh", "UK": "Uttarakhand", "WB": "West Bengal"
        };

        // Placeholder for alert to mimic real functionality without using window.alert
        function alert(message) {
            console.log("SIMULATED ALERT:", message);
            // In a real environment, you would use a custom modal here.
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: #B91C1C; /* Danger Red */
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                font-weight: bold;
                transition: opacity 0.3s ease-in-out;
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.style.opacity = 0, 3000);
            setTimeout(() => notification.remove(), 3300);
        }

        // Function to generate a random 5-digit Guide ID
        function generateRandomOrderID() {
            // Generates a random number between 10000 and 99999
            const randomNum = Math.floor(10000 + Math.random() * 90000); 
            return `GUIDE-${randomNum}`;
        }

        /**
         * The new function triggered by 'Click Here' buttons. It switches to the form screen.
         * @param {string} vehicleType - The type of vehicle (e.g., 'Old Vehicle', 'Electric Vehicle').
         */
        function handleApplyNow(vehicleType) {
            showForm(vehicleType);
        }
        
        // Function to go back to the main card selection screen (Still needed for the 'Back' button in the form)
        function goBackToSelection() {
            // Clear any active timers when returning to the home screen
            clearInterval(paymentTimerInterval);
            document.getElementById('selection-screen').classList.remove('hidden');
            document.getElementById('booking-form-screen').classList.add('hidden');
            document.getElementById('payment-screen').classList.add('hidden'); // Hide confirmation step
            document.getElementById('thank-you-screen').classList.add('hidden'); // NEW: Hide thank you screen
            currentStep = 1; // Reset step
        }

        // Function to show the main form container
        function showForm(vehicleType) {
            selectedVehicleType = vehicleType;
            document.getElementById('selection-screen').classList.add('hidden');
            document.getElementById('booking-form-screen').classList.remove('hidden');
            document.getElementById('payment-screen').classList.add('hidden'); // Ensure confirmation is hidden
            document.getElementById('thank-you-screen').classList.add('hidden'); // Ensure thank you is hidden
            // Update title based on selection 
            document.getElementById('form-title').textContent = `${vehicleType} Plate Guide`;
            
            // Render Step 1
            renderStep(1);
        }

        // Function to manage visibility and titles for form steps
        function renderStep(step) {
            currentStep = step;
            const step1 = document.getElementById('step-1-vehicle');
            const step2 = document.getElementById('step-2-personal');
            const subtitle = document.getElementById('form-subtitle');
            const nextBtn = document.getElementById('next-button');
            const reviewBtn = document.getElementById('review-button');
            
            step1.classList.add('hidden');
            step2.classList.add('hidden');
            nextBtn.classList.add('hidden');
            reviewBtn.classList.add('hidden');
            
            if (step === 1) {
                step1.classList.remove('hidden');
                nextBtn.classList.remove('hidden');
                reviewBtn.classList.add('hidden'); 
                subtitle.textContent = "Step 1 of 3: Vehicle Details (‡§µ‡§æ‡§π‡§® ‡§µ‡§ø‡§µ‡§∞‡§£)";
                nextBtn.textContent = "Next: Personal Details ‚Üí";
            } else if (step === 2) {
                step2.classList.remove('hidden');
                nextBtn.classList.add('hidden'); 
                reviewBtn.classList.remove('hidden');
                subtitle.textContent = "Step 2 of 3: Personal Details (‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£)";
            }
        }

        // Function to move from Step 1 to Step 2 (and then to final confirmation step)
        function nextStep() {
            if (currentStep === 1) {
                // Basic validation for Step 1
                const state = document.getElementById('state-select').value;
                const regNo = document.getElementById('reg-number').value;
                const chassis = document.getElementById('chassis-number').value;
                const engine = document.getElementById('engine-number').value;
                const vehicleClass = document.getElementById('vehicle-class-select').value;

                if (!state || !regNo || !chassis || !engine || !vehicleClass) {
                    alert('Please fill in all mandatory Vehicle Details before proceeding. (‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§∏‡§≠‡•Ä ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§µ‡§æ‡§π‡§® ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç‡•§)');
                    return;
                }
                if (chassis.length !== 6 || engine.length !== 6) {
                    alert('Chassis and Engine numbers must be the last 6 digits. (‡§ö‡•á‡§∏‡§ø‡§∏ ‡§î‡§∞ ‡§á‡§Ç‡§ú‡§® ‡§®‡§Ç‡§¨‡§∞ ‡§Ö‡§Ç‡§§‡§ø‡§Æ 6 ‡§Ö‡§Ç‡§ï ‡§π‡•ã‡§®‡•á ‡§ö‡§æ‡§π‡§ø‡§è‡•§)');
                    return;
                }
                renderStep(2);

            } else if (currentStep === 2) {
                // Basic validation for Step 2
                const name = document.getElementById('full-name').value;
                const mobile = document.getElementById('mobile-number').value;
                const email = document.getElementById('email-address').value;
                const address = document.getElementById('full-address').value;
                const city = document.getElementById('city').value;
                const pincode = document.getElementById('pincode').value;

                if (!name || !mobile || !email || !address || !city || !pincode) {
                    alert('Please fill in all mandatory Personal Details before submitting. (‡§ï‡•É‡§™‡§Ø‡§æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§∏‡§≠‡•Ä ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç‡•§)');
                    return;
                }
                
                // --- Transition to Final Confirmation Step ---
                showFinalConfirmationStep();
            }
        }

        // Function to display the final confirmation step screen
        function showFinalConfirmationStep() {
            document.getElementById('booking-form-screen').classList.add('hidden');
            document.getElementById('payment-screen').classList.remove('hidden');

            // Generate a unique Guide ID every time
            const orderId = generateRandomOrderID();
            
            // Update Details
            document.getElementById('payment-order-id').textContent = orderId;

            // Start the simulated 5-minute timer
            startPaymentTimer(300); // 300 seconds = 5 minutes
        }

        // Function to start the 5-minute confirmation timer
        function startPaymentTimer(duration) {
            let timer = duration;
            const display = document.getElementById('payment-timer');

            // Clear any existing timer first
            clearInterval(paymentTimerInterval);

            paymentTimerInterval = setInterval(() => {
                const minutes = parseInt(timer / 60, 10);
                const seconds = parseInt(timer % 60, 10);

                const mins = minutes < 10 ? "0" + minutes : minutes;
                const secs = seconds < 10 ? "0" + seconds : seconds;

                display.textContent = mins + ":" + secs;

                if (--timer < 0) {
                    clearInterval(paymentTimerInterval);
                    display.textContent = "Expired";
                    alert("Confirmation window has expired. Please restart the guide. (‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ó‡§æ‡§á‡§° ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç‡•§)");
                }
            }, 1000);
        }
        
        // FUNCTION: Handle transaction verification and show thank you screen
        function verifyTransaction() {
            // Simulating successful verification and submission
            alert('Guide process finalized successfully. Showing confirmation...');
            
            // Simulating a short delay before showing the final screen
            setTimeout(() => {
                 showThankYouScreen();
            }, 1000);
        }
        
        // FUNCTION: Display the Thank You screen
        function showThankYouScreen() {
            // Clear any active timers
            clearInterval(paymentTimerInterval);
        
            document.getElementById('payment-screen').classList.add('hidden');
            document.getElementById('thank-you-screen').classList.remove('hidden');
        }


        // Function to generate options for the state select
        function generateStateOptions() {
            let options = '<option value="">Select your State / UT (‡§Ö‡§™‡§®‡§æ ‡§∞‡§æ‡§ú‡•ç‡§Ø/‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§∂‡§æ‡§∏‡§ø‡§§ ‡§™‡•ç‡§∞‡§¶‡•á‡§∂ ‡§ö‡•Å‡§®‡•á‡§Ç)</option>';
            // Sort states alphabetically by name
            const sortedStates = Object.entries(indianStates).sort(([, a], [, b]) => a.localeCompare(b));
            
            sortedStates.forEach(([code, name]) => {
                options += `<option value="${code}">${name} (${code})</option>`;
            });
            return options;
        }

        // Initialize form fields with placeholder content (runs on load)
        document.addEventListener('DOMContentLoaded', () => {
            // Inject Step 1 HTML content (Vehicle Details)
            document.getElementById('step-1-vehicle').innerHTML = `
                <!-- State -->
                <label for="state-select" class="block text-sm font-medium text-gray-700">State / UT (‡§∞‡§æ‡§ú‡•ç‡§Ø/‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§∂‡§æ‡§∏‡§ø‡§§ ‡§™‡•ç‡§∞‡§¶‡•á‡§∂)</label>
                <select id="state-select" class="mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none focus:ring-primary-blue focus:border-primary-blue sm:text-sm rounded-md shadow-sm border">
                    ${generateStateOptions()}
                </select>

                <!-- Vehicle Registration Number -->
                <div>
                    <label for="reg-number" class="block text-sm font-medium text-gray-700">Vehicle Registration Number (‡§µ‡§æ‡§π‡§® ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ)</label>
                    <input type="text" id="reg-number" placeholder="UK14AB1234" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue uppercase" maxlength="10">
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Chassis Number -->
                    <div>
                        <label for="chassis-number" class="block text-sm font-medium text-gray-700">Chassis Number (Last 6 digits) (‡§ö‡•á‡§∏‡§ø‡§∏ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ)</label>
                        <input type="text" id="chassis-number" placeholder="12DEFC" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue uppercase" maxlength="6">
                    </div>
                    <!-- Engine Number -->
                    <div>
                        <label for="engine-number" class="block text-sm font-medium text-gray-700">Engine Number (Last 6 digits) (‡§á‡§Ç‡§ú‡§® ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ)</label>
                        <input type="text" id="engine-number" placeholder="ABCDEF" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue uppercase" maxlength="6">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Vehicle Class -->
                    <div>
                        <label for="vehicle-class-select" class="block text-sm font-medium text-gray-700">Vehicle Class (‡§µ‡§æ‡§π‡§® ‡§µ‡§∞‡•ç‡§ó)</label>
                        <select id="vehicle-class-select" class="mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none focus:ring-primary-blue focus:border-primary-blue sm:text-sm rounded-md shadow-sm border">
                            <option value="">Select Vehicle Class (‡§µ‡§æ‡§π‡§® ‡§µ‡§∞‡•ç‡§ó ‡§ö‡•Å‡§®‡•á‡§Ç)</option>
                            <option value="2W">Two Wheeler (2W) - ‡§¶‡•ã ‡§™‡§π‡§ø‡§Ø‡§æ</option>
                            <option value="3W">Three Wheeler (3W) - ‡§§‡•Ä‡§® ‡§™‡§π‡§ø‡§Ø‡§æ</option>
                            <option value="4W">Four Wheeler (4W) - ‡§ö‡§æ‡§∞ ‡§™‡§π‡§ø‡§Ø‡§æ</option>
                            <option value="Commercial">Commercial - ‡§µ‡§æ‡§£‡§ø‡§ú‡•ç‡§Ø‡§ø‡§ï</option>
                        </select>
                    </div>

                    <!-- Number of Plates -->
                    <div>
                        <label for="plate-count" class="block text-sm font-medium text-gray-700">Number of Plates (‡§™‡•ç‡§≤‡•á‡§ü‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ)</label>
                        <select id="plate-count" class="mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none focus:ring-primary-blue focus:border-primary-blue sm:text-sm rounded-md shadow-sm border">
                            <option value="2">2 (Front and Rear - ‡§∏‡§æ‡§Æ‡§®‡•á ‡§î‡§∞ ‡§™‡•Ä‡§õ‡•á)</option>
                            <option value="1">1 (Only Rear - ‡§ï‡•á‡§µ‡§≤ ‡§™‡•Ä‡§õ‡•á)</option>
                        </select>
                    </div>
                </div>
            `;
            
            // Inject Step 2 HTML content (Personal Details)
            document.getElementById('step-2-personal').innerHTML = `
                <!-- Full Name -->
                <div>
                    <label for="full-name" class="block text-sm font-medium text-gray-700">Full Name (‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ)</label>
                    <input type="text" id="full-name" placeholder="E.g., Rajesh Kumar" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue uppercase">
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Email Address -->
                    <div>
                        <label for="email-address" class="block text-sm font-medium text-gray-700">Email Address (‡§à‡§Æ‡•á‡§≤)</label>
                        <input type="email" id="email-address" placeholder="example@domain.com" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue">
                    </div>
                    <!-- Mobile Number -->
                    <div>
                        <label for="mobile-number" class="block text-sm font-medium text-gray-700">Mobile Number (‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞)</label>
                        <input type="tel" id="mobile-number" placeholder="9876543210" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue" maxlength="10">
                    </div>
                </div>

                <!-- Address -->
                <div>
                    <label for="full-address" class="block text-sm font-medium text-gray-700">Full Address (‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ)</label>
                    <textarea id="full-address" rows="3" placeholder="House No, Street, Landmark" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue"></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- City -->
                    <div>
                        <label for="city" class="block text-sm font-medium text-gray-700">City (‡§∂‡§π‡§∞)</label>
                        <input type="text" id="city" placeholder="E.g., New Delhi" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue">
                    </div>
                    <!-- Pincode -->
                    <div>
                        <label for="pincode" class="block text-sm font-medium text-gray-700">Pincode (‡§™‡§ø‡§®‡§ï‡•ã‡§°)</label>
                        <input type="text" id="pincode" placeholder="110001" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-primary-blue focus:border-primary-blue" maxlength="6">
                    </div>
                </div>
            `;
        });

    </script>
</body>
</html>
